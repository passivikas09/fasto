;/*FB_PKG_DELIM*/

__d("CometFeedStory3DPhotoAttachmentStyle_styleTypeRenderer$normalization.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[a,c,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"uri_token",storageKey:null}],type:"Page",abstractKey:null}],storageKey:null},e=[c];return{kind:"SplitOperation",metadata:{},name:"CometFeedStory3DPhotoAttachmentStyle_styleTypeRenderer$normalization",selections:[{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachment",plural:!1,selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"description",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"container_story",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"creation_time",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actors",plural:!0,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:[{kind:"Literal",name:"height",value:48},{kind:"Literal",name:"width",value:48}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[b],storageKey:"profile_picture(height:48,width:48)"},c],storageKey:null},c],storageKey:null}],type:"Photo",abstractKey:null},c],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[a,{alias:"photo_image",args:[{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"sizing",value:"cover-fill"},{kind:"Literal",name:"width",value:500}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[b,{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},{kind:"TypeDiscriminator",abstractKey:"__isMedia"},{alias:null,args:null,kind:"ScalarField",name:"is_playable",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"immersive_photo_encodings",plural:!0,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"projection_type",storageKey:null},c,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"binary_cdn_uri",storageKey:null}],type:"PhotoEncoding3D",abstractKey:null}],storageKey:null},c,d],type:"Photo",abstractKey:null},{kind:"InlineFragment",selections:[c,d],type:"Video",abstractKey:null},{kind:"InlineFragment",selections:e,type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:e,type:"DynamicFeedAdAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:e,type:"GenericAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:e,type:"MontageImage",abstractKey:null},{kind:"InlineFragment",selections:e,type:"MontageVideo",abstractKey:null}],storageKey:null}],storageKey:null},{kind:"InlineFragment",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"is_prod_eligible",storageKey:null}],type:"StoryAttachmentStyleRendererUnion",abstractKey:"__isStoryAttachmentStyleRendererUnion"}]}}();e.exports=a}),null);
__d("CometFeedStory3DPhotoAttachmentStyle_styleTypeRenderer.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};c=[c,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[b,c,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"uri_token",storageKey:null}],type:"Page",abstractKey:null}],storageKey:null}];return{argumentDefinitions:[{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"CometFeedStory3DPhotoAttachmentStyle_styleTypeRenderer",selections:[{args:null,kind:"FragmentSpread",name:"useCometFeedStoryAttachmentMatchDebugger_storyAttachmentStyleRendererUnion"},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachment",plural:!1,selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"description",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"container_story",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"creation_time",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actors",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:[{kind:"Literal",name:"height",value:48},{kind:"Literal",name:"width",value:48}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[a],storageKey:"profile_picture(height:48,width:48)"}],storageKey:null}],storageKey:null}],type:"Photo",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[b,{alias:"photo_image",args:[{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"sizing",value:"cover-fill"},{kind:"Literal",name:"width",value:500}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null}],type:"Photo",abstractKey:null},{args:null,kind:"FragmentSpread",name:"CometRemote3DPhotoViewer_photo"},{kind:"InlineDataFragmentSpread",name:"getCometMediaURL_media",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_playable",storageKey:null},{kind:"InlineFragment",selections:c,type:"Photo",abstractKey:null},{kind:"InlineFragment",selections:c,type:"Video",abstractKey:null}],args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"StoryAttachment3DPhotoStyleRenderer",abstractKey:null}}();e.exports=a}),null);
__d("CometRemote3DPhotoViewer_photo.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometRemote3DPhotoViewer_photo",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"immersive_photo_encodings",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"projection_type",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"binary_cdn_uri",storageKey:null}],type:"PhotoEncoding3D",abstractKey:null}],storageKey:null}],type:"Photo",abstractKey:null};e.exports=a}),null);
__d("getCometPrefersReducedMotion",["getPrefersReducedMotion"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("getPrefersReducedMotion")}),98);
__d("EndianAwareDataView",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c){c===void 0&&(c=0),this.$2=new DataView(a,c),this.$1=b}var b=a.prototype;b.getByteLength=function(){return this.$2.byteLength};b.getU8=function(a){return this.$2.getUint8(a)};b.getI8=function(a){return this.$2.getInt8(a)};b.getU16=function(a){return this.$2.getUint16(a,this.$1)};b.getI16=function(a){return this.$2.getInt16(a,this.$1)};b.getU32=function(a){return this.$2.getUint32(a,this.$1)};b.getI32=function(a){return this.$2.getInt32(a,this.$1)};b.getF32=function(a){return this.$2.getFloat32(a,this.$1)};return a}();f["default"]=a}),66);
__d("EndianAwareDataReader",["EndianAwareDataView"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$2=new(c("EndianAwareDataView"))(a,b),this.$1=0}var b=a.prototype;b.canReadU8=function(){return this.$1<this.$2.getByteLength()};b.canReadU16=function(){return this.$1<this.$2.getByteLength()-1};b.canReadU32=function(){return this.$1<this.$2.getByteLength()-3};b.seekTo=function(a){this.$1=a};b.seekRelative=function(a){this.$1+=a};b.readU8=function(){var a=this.$2.getU8(this.$1);this.$1+=1;return a};b.peekU8=function(){return this.$2.getU8(this.$1)};b.readI8=function(){var a=this.$2.getI8(this.$1);this.$1+=1;return a};b.peekI8=function(){return this.$2.getI8(this.$1)};b.readU16=function(){var a=this.$2.getU16(this.$1);this.$1+=2;return a};b.peekU16=function(){return this.$2.getU16(this.$1)};b.readI16=function(){var a=this.$2.getI16(this.$1);this.$1+=2;return a};b.peekI16=function(){return this.$2.getI16(this.$1)};b.readU32=function(){var a=this.$2.getU32(this.$1);this.$1+=4;return a};b.peekU32=function(){return this.$2.getU32(this.$1)};b.readI32=function(){var a=this.$2.getI32(this.$1);this.$1+=4;return a};b.peekI32=function(){return this.$2.getI32(this.$1)};b.readF32=function(){var a=this.$2.getF32(this.$1);this.$1+=4;return a};b.peekF32=function(){return this.$2.getF32(this.$1)};return a}();g["default"]=a}),98);
__d("Comet3DPhotoLoadingOverlay.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={cubeInvisible:{opacity:"xg01cxk",$$css:!0},cubeRoot:{height:"xy75621",pointerEvents:"x47corl",position:"x10l6tqk",start:"xtzzx4i",left:null,right:null,top:"xwa60dl",transform:"x11lhmoz",transitionDuration:"xippbsu",transitionProperty:"x19991ni",transitionTimingFunction:"xl405pv",width:"xni59qk",$$css:!0}};function a(a){a=a.isVisible;return j.jsx("div",{className:(h||(h=c("stylex")))(k.cubeRoot,!a&&k.cubeInvisible),children:j.jsx("div",{})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometFeedStoryImmersiveMediaMouseOverlay.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={mouse:{animationDuration:"x1c74tu6",animationIterationCount:"xa4qsjk",animationName:"x1mvr4ho",bottom:"xy58vm5",height:"x10w6t97",marginStart:"x1kpxzk0",marginLeft:null,marginRight:null,position:"x10l6tqk",start:"xtzzx4i",left:null,right:null,width:"x1xp8n7a",$$css:!0},mouseBackground:{backgroundColor:"x1h6ucep",borderTopStartRadius:"x13zp6kq",borderTopEndRadius:"x1mcfq15",borderBottomEndRadius:"xrosliz",borderBottomStartRadius:"x1wb7cse",height:"xc9qbxq",position:"x10l6tqk",transform:"xwdmxg7",width:"x17z2i9w",$$css:!0},mouseBody:{backgroundColor:"x14hiurz",borderTopStartRadius:"x168nmei",borderTopEndRadius:"x13lgxp2",borderBottomEndRadius:"xrc8dwe",borderBottomStartRadius:"xxxhv2y",height:"xi0exxh",position:"x10l6tqk",width:"x1xp8n7a",$$css:!0},mouseButtons:{borderTopStartRadius:"x12myldv",borderTopEndRadius:"x1udsgas",borderBottomEndRadius:"x5pf9jr",borderBottomStartRadius:"xo71vjh",height:"xegnrdp",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x10l6tqk",transform:"x1o62s2e",width:"x1xp8n7a",$$css:!0},mouseInner:{animationDuration:"x1c74tu6",animationIterationCount:"xa4qsjk",animationName:"xzgb3c0",$$css:!0},mouseInvisible:{opacity:"xg01cxk",$$css:!0},mouseLeftButton:{backgroundColor:"x14hiurz",height:"x1hagigm",position:"x10l6tqk",width:"x1xc55vz",$$css:!0},mouseLeftButtonClick:{animationDuration:"x1c74tu6",animationIterationCount:"xa4qsjk",animationName:"x1176mnt",$$css:!0},mouseRightButton:{backgroundColor:"x14hiurz",height:"x1hagigm",position:"x10l6tqk",transform:"x1kq0cn2",width:"xci0xqf",$$css:!0},mouseRoot:{bottom:"xn0vg7t",opacity:"x1hc1fzr",pointerEvents:"x47corl",position:"x10l6tqk",start:"xtzzx4i",left:null,right:null,transform:"x1nc5ocm",$$css:!0},mouseRotate:{animationDuration:"x1c74tu6",animationIterationCount:"xa4qsjk",animationName:"x1f3pjjk",$$css:!0},mouseText:{color:"x14ctfv",fontSize:"x1pg5gke",fontWeight:"x117nqv4",marginTop:"xr9ek0c",marginEnd:"xfs2ol5",marginBottom:"xjpr12u",marginStart:"x12mruv9",textAlign:"x2b8uid",textShadow:"xesdh2l",whiteSpace:"xuxw1ft",$$css:!0}};function a(a){var b=a.descriptionFbt,d=a.isActive;a=a.showClick;return j.jsxs("div",{className:(h||(h=c("stylex")))(k.mouseRoot,!d&&k.mouseInvisible),children:[j.jsx("div",{className:"x1c74tu6 xa4qsjk x1mvr4ho xy58vm5 x10w6t97 x1kpxzk0 x10l6tqk xtzzx4i x1xp8n7a",children:j.jsx("div",{className:"x1c74tu6 xa4qsjk x1f3pjjk",children:j.jsxs("div",{className:"x1c74tu6 xa4qsjk xzgb3c0",children:[j.jsx("div",{className:"x1h6ucep x13zp6kq x1mcfq15 xrosliz x1wb7cse xc9qbxq x10l6tqk xwdmxg7 x17z2i9w"}),j.jsxs("div",{className:"x12myldv x1udsgas x5pf9jr xo71vjh xegnrdp x6ikm8r x10wlt62 x10l6tqk x1o62s2e x1xp8n7a",children:[j.jsx("div",{className:a?"x14hiurz x1hagigm x10l6tqk x1xc55vz x1c74tu6 xa4qsjk x1176mnt":"x14hiurz x1hagigm x10l6tqk x1xc55vz"}),j.jsx("div",{className:"x14hiurz x1hagigm x10l6tqk x1kq0cn2 xci0xqf"})]}),j.jsx("div",{className:"x14hiurz x168nmei x13lgxp2 xrc8dwe xxxhv2y xi0exxh x10l6tqk x1xp8n7a"})]})})}),j.jsx("div",{className:"x14ctfv x1pg5gke x117nqv4 xr9ek0c xfs2ol5 xjpr12u x12mruv9 x2b8uid xesdh2l xuxw1ft",children:b})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("Matrices",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){a=Math.tan(a/2)*c;var e=-a,f=a*b;b=e*b;return[2*c/(f-b),0,0,0,0,2*c/(a-e),0,0,(f+b)/(f-b),(a+e)/(a-e),(c+d)/(c-d),-1,0,0,c*d*2/(c-d),0]}function g(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function b(a,b,c){return[a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1]}function c(a){var b=a[0],c=a[1],d=a[2];a=a[3];var e=2/Math.sqrt(b*b+c*c+d*d+a*a);return[1-e*(c*c+d*d),e*(b*c+d*a),e*(b*d-c*a),0,e*(b*c-d*a),1-e*(b*b+d*d),e*(c*d+b*a),0,e*(b*d+c*a),e*(c*d-b*a),1-e*(b*b+c*c),0,0,0,0,1]}function d(a){return h(a[0],a[1],a[2])}function h(a,b,c){return[1,0,0,0,0,1,0,0,0,0,1,0,a,b,c,1]}function e(a){var b=a[0]*a[5]-a[1]*a[4],c=a[0]*a[6]-a[2]*a[4],d=a[0]*a[7]-a[3]*a[4],e=a[1]*a[6]-a[2]*a[5],f=a[1]*a[7]-a[3]*a[5],g=a[2]*a[7]-a[3]*a[6],h=a[8]*a[13]-a[9]*a[12],i=a[8]*a[14]-a[10]*a[12],j=a[8]*a[15]-a[11]*a[12],k=a[9]*a[14]-a[10]*a[13],l=a[9]*a[15]-a[11]*a[13],m=a[10]*a[15]-a[11]*a[14],n=b*m-c*l+d*k+e*j-f*i+g*h,o=(a[5]*m-a[6]*l+a[7]*k)/n,p=(a[2]*l-a[1]*m-a[3]*k)/n,q=(a[13]*g-a[14]*f+a[15]*e)/n,r=(a[10]*f-a[9]*g-a[11]*e)/n,s=(a[6]*j-a[4]*m-a[7]*i)/n;m=(a[0]*m-a[2]*j+a[3]*i)/n;var t=(a[14]*d-a[12]*g-a[15]*c)/n;g=(a[8]*g-a[10]*d+a[11]*c)/n;var u=(a[4]*l-a[5]*j+a[7]*h)/n;j=(a[1]*j-a[0]*l-a[3]*h)/n;l=(a[12]*f-a[13]*d+a[15]*b)/n;d=(a[9]*d-a[8]*f-a[11]*b)/n;f=(a[5]*i-a[4]*k-a[6]*h)/n;k=(a[0]*k-a[1]*i+a[2]*h)/n;i=(a[13]*c-a[12]*e-a[14]*b)/n;h=(a[8]*e-a[9]*c+a[10]*b)/n;return[o,p,q,r,s,m,t,g,u,j,l,d,f,k,i,h]}function i(a,b){var c=g();c[0]=a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12];c[1]=a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13];c[2]=a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14];c[3]=a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15];c[4]=a[4]*b[0]+a[5]*b[4]+a[6]*b[8]+a[7]*b[12];c[5]=a[4]*b[1]+a[5]*b[5]+a[6]*b[9]+a[7]*b[13];c[6]=a[4]*b[2]+a[5]*b[6]+a[6]*b[10]+a[7]*b[14];c[7]=a[4]*b[3]+a[5]*b[7]+a[6]*b[11]+a[7]*b[15];c[8]=a[8]*b[0]+a[9]*b[4]+a[10]*b[8]+a[11]*b[12];c[9]=a[8]*b[1]+a[9]*b[5]+a[10]*b[9]+a[11]*b[13];c[10]=a[8]*b[2]+a[9]*b[6]+a[10]*b[10]+a[11]*b[14];c[11]=a[8]*b[3]+a[9]*b[7]+a[10]*b[11]+a[11]*b[15];c[12]=a[12]*b[0]+a[13]*b[4]+a[14]*b[8]+a[15]*b[12];c[13]=a[12]*b[1]+a[13]*b[5]+a[14]*b[9]+a[15]*b[13];c[14]=a[12]*b[2]+a[13]*b[6]+a[14]*b[10]+a[15]*b[14];c[15]=a[12]*b[3]+a[13]*b[7]+a[14]*b[11]+a[15]*b[15];return c}function j(a,b){var c=[0,0,0,0];c[0]=a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12];c[1]=a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13];c[2]=a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14];c[3]=a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15];return c}function k(a){return[a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]]}a={createIdentityMat4:g,createPerspectiveProjectionMatrix:a,createRotationMatrixFromQuaternion:c,createScalingMatrix:b,createTranslationMatrix:h,createTranslationMatrixFromVec:d,invertMat4:e,multiplyMat4:i,multiplyVec4:j,transposeMatrix:k};f["default"]=a}),66);
__d("CometWebGLCubemapTexture",["recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a,this.$2=a.createTexture(),this.initializeTexture()}var b=a.prototype;b.initializeTexture=function(){var a=this.$1;a.bindTexture(a.TEXTURE_CUBE_MAP,this.$2);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR_MIPMAP_LINEAR);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);var b=new Uint8Array([0,0,0,0]);a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_X,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Y,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Z,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.bindTexture(a.TEXTURE_CUBE_MAP,null)};b.setFace=function(a,b){var d=this.$1,e=0;switch(a){case 0:e=d.TEXTURE_CUBE_MAP_POSITIVE_X;break;case 1:e=d.TEXTURE_CUBE_MAP_NEGATIVE_Z;break;case 2:e=d.TEXTURE_CUBE_MAP_NEGATIVE_X;break;case 3:e=d.TEXTURE_CUBE_MAP_POSITIVE_Z;break;case 4:e=d.TEXTURE_CUBE_MAP_POSITIVE_Y;break;case 5:e=d.TEXTURE_CUBE_MAP_NEGATIVE_Y;break;default:c("recoverableViolation")("Cubemap face out of bounds","webgl");return}e!==0&&(d.bindTexture(d.TEXTURE_CUBE_MAP,this.$2),d.texImage2D(e,0,d.RGB,d.RGB,d.UNSIGNED_BYTE,b),d.bindTexture(d.TEXTURE_CUBE_MAP,null))};b.generateMipmap=function(){var a=this.$1;a.bindTexture(a.TEXTURE_CUBE_MAP,this.$2);a.generateMipmap(a.TEXTURE_CUBE_MAP);a.bindTexture(a.TEXTURE_CUBE_MAP,null)};b.bindToSlot=function(a){var b=this.$1;b.activeTexture(b.TEXTURE0+a);b.bindTexture(b.TEXTURE_CUBE_MAP,this.$2)};b.release=function(){this.$1.deleteTexture(this.$2)};return a}();g["default"]=a}),98);
__d("CometWebGLIndexBuffer",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$2=a,this.$1=a.createBuffer()}var b=a.prototype;b.bufferData=function(a){var b=this.$2;b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.$1);b.bufferData(b.ELEMENT_ARRAY_BUFFER,a,b.STATIC_DRAW)};b.bindToElements=function(){var a=this.$2;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.$1)};return a}();f["default"]=a}),66);
__d("CometWebGLVertexBuffer",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$2=a,this.$1=a.createBuffer()}var b=a.prototype;b.bufferData=function(a){var b=this.$2;b.bindBuffer(b.ARRAY_BUFFER,this.$1);b.bufferData(b.ARRAY_BUFFER,a,b.STATIC_DRAW)};b.bindToAttribute=function(a,b,c,d,e,f){var g=this.$2;g.bindBuffer(g.ARRAY_BUFFER,this.$1);g.vertexAttribPointer(a,b,c,d,e,f);g.enableVertexAttribArray(a)};return a}();f["default"]=a}),66);
__d("getWebGLAttributeSizeAndType",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b=b?WebGLRenderingContext.UNSIGNED_BYTE:WebGLRenderingContext.FLOAT;switch(a.type){case WebGLRenderingContext.FLOAT:return{size:1,type:b};case WebGLRenderingContext.FLOAT_VEC2:return{size:2,type:b};case WebGLRenderingContext.FLOAT_VEC3:return{size:3,type:b};case WebGLRenderingContext.FLOAT_VEC4:return{size:4,type:b};case WebGLRenderingContext.FLOAT_MAT2:return{size:4,type:b};case WebGLRenderingContext.FLOAT_MAT3:return{size:9,type:b};case WebGLRenderingContext.FLOAT_MAT4:return{size:16,type:b}}return{size:1,type:b}}f["default"]=a}),66);
__d("CometWebGLGeometry",["CometWebGLIndexBuffer","CometWebGLVertexBuffer","getWebGLAttributeSizeAndType","recoverableViolation","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){switch(a){case WebGLRenderingContext.BYTE:case WebGLRenderingContext.UNSIGNED_BYTE:return 1;case WebGLRenderingContext.SHORT:case WebGLRenderingContext.UNSIGNED_SHORT:return 2;case WebGLRenderingContext.FLOAT:return 4}c("recoverableViolation")("Unrecognized vertex type: "+a,"webgl");return 1}a=function(){function a(a,b){b===void 0&&(b={interleaved:!0}),this.$1=[],this.$2=new(c("CometWebGLVertexBuffer"))(a),this.$3=null,this.$4=0,this.$6=null,this.$7=null,this.$8=0,this.$9=b.interleaved!==!1,this.$5=a,this.$10=0}var b=a.prototype;b.addAttribute=function(a,b){b===void 0&&(b={normalize:!1});if(!this.$9&&b.offset==null)throw c("unrecoverableViolation")("Vertex Buffer is not interleaved but attribute was added without an offset","immersive_media");var d=!!b.normalize,e=c("getWebGLAttributeSizeAndType")(a,d),f=e.size;e=e.type;var g=h(e);this.$1.push({loc:a.location,normalize:d,offset:b.offset!=null?b.offset:this.$10,size:f,stride:b.stride!=null?b.stride:g*f,type:e});this.$10+=g*f};b.bufferData=function(a){if(a instanceof ArrayBuffer){this.$2.bufferData(a);this.$4=a.byteLength;return}if(this.$3&&a.length<=this.$3.length){for(var b=0;b<a.length;b++)this.$3[b]=a[b];for(b=a.length;b<this.$3.length;b++)this.$3[b]=0}else this.$3=new Float32Array(a);this.$4=a.length*4;this.$2.bufferData(this.$3.buffer)};b.bufferIndex=function(a){if(this.$7&&a.length<this.$7.length){for(var b=0;b<a.length;b++)this.$7[b]=a[b];for(b=a.length;b<this.$7.length;b++)this.$7[b]=0}else this.$7=new Uint16Array(a);this.$8=a.length;this.$6||(this.$6=new(c("CometWebGLIndexBuffer"))(this.$5));this.$6.bufferData(this.$7)};b.bindToAttributes=function(){for(var a=0;a<this.$1.length;a++){var b=this.$1[a];this.$2.bindToAttribute(b.loc,b.size,b.type,!!b.normalize,this.$9?this.$10:b.stride,b.offset)}this.$6&&this.$6.bindToElements()};b.draw=function(){if(this.$9&&this.$4%this.$10!==0){c("recoverableViolation")("Geometry buffer length is not perfectly divisible by stride","webgl");return}var a=this.$5;if(this.$7)a.drawElements(a.TRIANGLES,this.$8,a.UNSIGNED_SHORT,0);else{var b=this.$4/this.$10;a.drawArrays(a.TRIANGLES,0,b)}};return a}();g["default"]=a}),98);
__d("CometWebGLTexture",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){var c;b===void 0&&(b=Object.freeze({}));this.$1=a;this.$5=a.createTexture();this.$2=(c=b.generateMipmaps)!=null?c:!1;a.bindTexture(a.TEXTURE_2D,this.$5);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);this.$6=(c=b.width)!=null?c:0;this.$3=(c=b.height)!=null?c:0;if("source"in b){c=b.source;c==null?a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.$6,this.$3,0,a.RGBA,a.UNSIGNED_BYTE,c):this.setSource(c)}else a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array([0,0,0,0]))}var b=a.prototype;b.getGLTexture=function(){return this.$5};b.setSource=function(a,b){b===void 0&&(b=!1);this.$4=a;var c=this.$1;c.bindTexture(c.TEXTURE_2D,this.$5);a instanceof Image?(c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,b?1:0),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,a),this.$6=a.naturalWidth,this.$3=a.naturalHeight):a instanceof HTMLCanvasElement&&(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,a),this.$6=a.width,this.$3=a.height);this.$2&&(c.generateMipmap(c.TEXTURE_2D),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR_MIPMAP_LINEAR));c.bindTexture(c.TEXTURE_2D,null)};b.bindToSlot=function(a){var b=this.$1;b.activeTexture(b.TEXTURE0+a);b.bindTexture(b.TEXTURE_2D,this.$5)};return a}();f["default"]=a}),66);
__d("CometWebGLMesh",["CometWebGLCubemapTexture","CometWebGLGeometry","CometWebGLTexture","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){d===void 0&&(d={interleaved:!0}),this.$1=a,this.geometry=new(c("CometWebGLGeometry"))(a,{interleaved:d.interleaved!==!1}),this.program=b,this.renderOrder=1,this.uniforms={},this.visible=!0}var b=a.prototype;b.addAttribute=function(a,b){a=this.program.getAttribute(a);if(a==null)return this;this.geometry.addAttribute(a,b);return this};b.setUniform=function(a,b){this.uniforms[a]=b};b.getUniform=function(a){return this.uniforms[a]};b.unsetUniform=function(a){delete this.uniforms[a]};b.bufferData=function(a){this.geometry.bufferData(a)};b.bufferIndex=function(a){this.geometry.bufferIndex(a)};b.setVisible=function(a){this.visible=a};b.draw=function(){if(!this.visible)return;var a=0,b=this.program,d=b.getUniforms();for(d in d){var e=null;d in this.uniforms?e=this.uniforms[d]:e=b.getDefaultValueForUniform(d);var f=b.getUniform(d);if(f==null)throw c("unrecoverableViolation")("Specified uniform does not exist in program: "+d,"immersive_media");typeof e==="number"?f.set(e):Array.isArray(e)||e instanceof Float32Array?f.set(e):(e instanceof c("CometWebGLTexture")||e instanceof c("CometWebGLCubemapTexture"))&&(e.bindToSlot(a),f.set(a),a++)}this.geometry.bindToAttributes();this.geometry.draw()};return a}();g["default"]=a}),98);
__d("defaultValueForWebGLUniform",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case WebGLRenderingContext.FLOAT:return 0;case WebGLRenderingContext.FLOAT_VEC2:return[0,0];case WebGLRenderingContext.FLOAT_VEC3:return[0,0,0];case WebGLRenderingContext.FLOAT_VEC4:return[0,0,0,0];case WebGLRenderingContext.INT:return 0;case WebGLRenderingContext.INT_VEC2:return[0,0];case WebGLRenderingContext.INT_VEC3:return[0,0,0];case WebGLRenderingContext.INT_VEC4:return[0,0,0,0];case WebGLRenderingContext.FLOAT_MAT2:return[0,0,0,0];case WebGLRenderingContext.FLOAT_MAT3:return[0,0,0,0,0,0,0,0,0];case WebGLRenderingContext.FLOAT_MAT4:return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];case WebGLRenderingContext.SAMPLER_2D:return null;default:return null}}f["default"]=a}),66);
__d("extractAttributesFromWebGLProgram",["recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d={},e=a.getProgramParameter(b,a.ACTIVE_ATTRIBUTES);for(var f=0;f<e;f++){var g=a.getActiveAttrib(b,f);if(!g){c("recoverableViolation")("Attempted to retrieve an attribute that did not exist","webgl");continue}var h=a.getAttribLocation(b,g.name);d[g.name]={location:h,size:g.size,type:g.type}}return d}g["default"]=a}),98);
__d("createWebGLUniformSetter",["recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){switch(d){case a.FLOAT:return a.uniform1f.bind(a,b);case a.FLOAT_VEC2:return a.uniform2fv.bind(a,b);case a.FLOAT_VEC3:return a.uniform3fv.bind(a,b);case a.FLOAT_VEC4:return a.uniform4fv.bind(a,b);case a.INT:return a.uniform1i.bind(a,b);case a.INT_VEC2:return a.uniform2iv.bind(a,b);case a.INT_VEC3:return a.uniform3iv.bind(a,b);case a.INT_VEC4:return a.uniform4iv.bind(a,b);case a.FLOAT_MAT2:return a.uniformMatrix2fv.bind(a,b,!1);case a.FLOAT_MAT3:return a.uniformMatrix3fv.bind(a,b,!1);case a.FLOAT_MAT4:return a.uniformMatrix4fv.bind(a,b,!1);case a.SAMPLER_2D:return a.uniform1i.bind(a,b);case a.SAMPLER_CUBE:return a.uniform1i.bind(a,b);default:return function(){c("recoverableViolation")("This uniform type is not supported: "+d,"webgl")}}}g["default"]=a}),98);
__d("extractUniformsFromWebGLProgram",["createWebGLUniformSetter","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d={},e=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(var f=0;f<e;f++){var g=a.getActiveUniform(b,f);if(!g){c("recoverableViolation")("Attempted to retrieve a uniform that did not exist","webgl");continue}var h=a.getUniformLocation(b,g.name);d[g.name]={location:h,set:c("createWebGLUniformSetter")(a,h,g.type),size:g.size,type:g.type}}return d}g["default"]=a}),98);
__d("CometWebGLProgram",["defaultValueForWebGLUniform","extractAttributesFromWebGLProgram","extractUniformsFromWebGLProgram","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1={},this.$3=null,this.$4=[],this.$5={},this.$6={},this.$2=a}var b=a.prototype;b.addShader=function(a,b,d){if(this.$3){c("recoverableViolation")("Cannot add a shader, the program has already been compiled","webgl");return this}var e=a;if(d){d=d.map(function(a){return"#define "+a+"\n"}).join("");if(a.startsWith("#version")){var f=a.indexOf("\n")+1;e=a.substr(0,f)+d+a.substr(f)}else e=d+a}this.$4.push({code:e,type:b});return this};b.compile=function(){if(this.$3){c("recoverableViolation")("Cannot compile, the program has already been compiled","webgl");return this}var a=this.$2;if(a.isContextLost()){c("recoverableViolation")("Failed to create shader program, WebGL context lost","webgl");return this}var b=this.$4.map(function(b){var d=b.code;b=b.type;b=a.createShader(b);a.shaderSource(b,d);a.compileShader(b);if(!a.getShaderParameter(b,a.COMPILE_STATUS)){d=a.getShaderInfoLog(b)||"";a.deleteShader(b);c("recoverableViolation")("Failed to compile shader: "+d,"webgl")}return b}),d=a.createProgram();for(var b=b,e=Array.isArray(b),f=0,b=e?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=b.length)break;g=b[f++]}else{f=b.next();if(f.done)break;g=f.value}g=g;a.attachShader(d,g)}a.linkProgram(d);if(!a.getProgramParameter(d,a.LINK_STATUS)){g=a.getProgramInfoLog(d)||"";a.deleteProgram(d);c("recoverableViolation")("Failed to link program: "+g,"webgl");return this}this.$3=d;this.$6=c("extractUniformsFromWebGLProgram")(a,d);this.$1=c("extractAttributesFromWebGLProgram")(a,d);return this};b.use=function(){if(!this.$3){c("recoverableViolation")("Cannot use Program before it has been compiled","webgl");return}this.$2.useProgram(this.$3)};b.getUniform=function(a){var b=this.$6[a];if(!b){c("recoverableViolation")("Program does not have a uniform called "+a,"webgl");return null}return b};b.getUniforms=function(){return this.$6};b.getAttribute=function(a){var b=this.$1[a];if(!b){c("recoverableViolation")("Program does not have an attribute called "+a,"webgl");return null}return b};b.setUniformDefaults=function(a){for(var b in a)this.$5[b]=a[b];return this};b.getDefaultValueForUniform=function(a){if(!(a in this.$6)){c("recoverableViolation")("Program does not have a uniform called "+a,"webgl");return null}if(a in this.$5){var b=this.$5[a];return Array.isArray(b)?b.slice():b}return c("defaultValueForWebGLUniform")(this.$6[a].type)};return a}();g["default"]=a}),98);
__d("createWebGLTexturedMeshProgram",["CometWebGLProgram"],(function(a,b,c,d,e,f,g){"use strict";var h="\nattribute vec3 a_position;\nattribute vec2 a_texcoord_0;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 transformMatrix;\nvarying vec2 v_texcoord_0;\n\nvoid main() {\n  v_texcoord_0 = a_texcoord_0;\n  gl_Position = projectionMatrix * viewMatrix * transformMatrix * vec4(a_position, 1.0);\n}\n",i="\nprecision mediump float;\n\nuniform sampler2D u_texture_0;\nvarying vec2 v_texcoord_0;\n\nvoid main() {\n  gl_FragColor = texture2D(u_texture_0, v_texcoord_0);\n}\n";function a(a){var b=new(c("CometWebGLProgram"))(a);return b.addShader(h,a.VERTEX_SHADER).addShader(i,a.FRAGMENT_SHADER).compile().setUniformDefaults({projectionMatrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],transformMatrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],viewMatrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]})}g["default"]=a}),98);
__d("CometWebGLRoundedRectangleMesh",["CometWebGLMesh","CometWebGLTexture","createWebGLTexturedMeshProgram"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f){f===void 0&&(f=5);this.$1=a;this.$2=new(c("CometWebGLMesh"))(a,c("createWebGLTexturedMeshProgram")(a),{interleaved:!1});this.$2.addAttribute("a_position",{offset:0});this.$3=new(c("CometWebGLTexture"))(a);this.$2.setUniform("u_texture_0",this.$3);a=b/2;var g=d/2,h=0,i=[-a+e,g,h,a-e,g,h,-a,g-e,h,-a+e,g-e,h,a-e,g-e,h,a,g-e,h,-a,-g+e,h,-a+e,-g+e,h,a-e,-g+e,h,a,-g+e,h,-a+e,-g,h,a-e,-g,h],j=[0,1,4,4,3,0,2,3,7,7,6,2,3,4,8,8,7,3,4,5,9,9,8,4,7,8,11,11,10,7],k=[],l=[],m=Math.PI/2/f;for(var n=1;n<f;n++)k.push(e-e*Math.cos(m*n)),l.push(e-e*Math.sin(m*n));m=5;for(n=0;n<f-1;n++){var o=i.length/3;i.push(a-k[n],g-l[n],h);j.push(o,m,4);m=o}j.push(1,m,4);m=2;for(o=0;o<f-1;o++){n=i.length/3;i.push(-a+k[o],g-l[o],h);j.push(n,3,m);m=n}j.push(0,3,m);m=9;for(n=0;n<f-1;n++){o=i.length/3;i.push(a-k[n],-g+l[n],h);j.push(m,o,8);m=o}j.push(m,11,8);m=6;for(o=0;o<f-1;o++){n=i.length/3;i.push(-a+k[o],-g+l[o],h);j.push(7,n,m);m=n}j.push(7,10,m);this.$2.addAttribute("a_texcoord_0",{offset:i.length*4});n=e/b;o=e/d;i.push(n,0,1-n,0,0,o,n,o,1-n,o,1,o,0,1-o,n,1-o,1-n,1-o,1,1-o,n,1,1-n,1);for(h=0;h<f-1;h++)i.push(1-k[h]/b,l[h]/d);for(g=0;g<f-1;g++)i.push(k[g]/b,l[g]/d);for(a=0;a<f-1;a++)i.push(1-k[a]/b,1-l[a]/d);for(m=0;m<f-1;m++)i.push(k[m]/b,1-l[m]/d);this.$2.bufferData(i);this.$2.bufferIndex(j)}var b=a.prototype;b.setTransform=function(a){this.$2.setUniform("transformMatrix",a)};b.setTextureSource=function(a){this.$3.setSource(a)};b.draw=function(a,b){this.$2.setUniform("viewMatrix",a),this.$2.setUniform("projectionMatrix",b),this.$2.program.use(),this.$2.draw()};return a}();g["default"]=a}),98);
__d("ViewInVRButton.react",["fbt","CometPressable.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={button:{backgroundColor:"x18l40ae",color:"x14ctfv",end:"xds687c",left:null,right:null,paddingTop:"x889kno",paddingBottom:"x1a8lsjc",position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",$$css:!0},buttonLabel:{flexGrow:"x1iyjqo2",fontSize:"x6prxxf",textAlign:"x2b8uid",$$css:!0}};function a(a){a=a.onPress;return j.jsx(c("CometPressable.react"),{expanding:!0,onPress:a,xstyle:k.button,children:j.jsx("div",{className:"x1iyjqo2 x6prxxf x2b8uid",children:h._("View in VR")})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("XRImmersiveMediaStoryCard",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){var b=this,c=document.createElement("canvas");c.width=a.width;c.height=a.height;this.$1=c.getContext("2d");this.$2=a.photoURL;this.$4=a.title;this.$5=a.subtitle;this.$6=a.description;this.$3=new Image();this.$3.crossOrigin="Anonymous";this.$3.onload=function(){b.$7(),a.reload()};this.$3.src=this.$2;this.$7()}var b=a.prototype;b.$7=function(){var a=this.$1.canvas.width,b=this.$1.canvas.height,c=48,d=6;this.$1.fillStyle="#ffffff";this.$1.fillRect(0,0,a,b);this.$1.fillStyle="#000000";this.$1.font="bold 16px sans-serif";this.$1.fillText(this.$4,d*2+c,20);this.$1.font="normal 14px sans-serif";this.$1.fillText(this.$5,d*2+c,40);this.$1.font="normal 16px sans-serif";b="";a=a-d*2;for(var e=this.$6,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;b+=h;if(this.$1.measureText(b).width>a){b=b.slice(0,-3)+"...";break}}this.$1.fillText(b,d,74);this.$1.beginPath();this.$1.arc(d+c/2,d+c/2,c/2,0,Math.PI*2);this.$3.complete&&(this.$1.clip(),this.$1.drawImage(this.$3,d,d))};b.getCanvas=function(){return this.$1.canvas};return a}();f["default"]=a}),66);
__d("createWebGLColoredMeshProgram",["CometWebGLProgram"],(function(a,b,c,d,e,f,g){"use strict";var h="\nattribute vec3 a_position;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 transformMatrix;\n\nvoid main() {\n  gl_Position = projectionMatrix * viewMatrix * transformMatrix * vec4(a_position, 1.0);\n}\n",i="\nprecision mediump float;\n\nuniform vec4 u_color;\n\nvoid main() {\n  gl_FragColor = u_color;\n}\n";function a(a){var b=new(c("CometWebGLProgram"))(a);return b.addShader(h,a.VERTEX_SHADER).addShader(i,a.FRAGMENT_SHADER).compile().setUniformDefaults({projectionMatrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],transformMatrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],viewMatrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]})}g["default"]=a}),98);
__d("XRImmersiveMediaWindow",["CometWebGLMesh","createWebGLColoredMeshProgram"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e){this.$1=a;this.$2=new(c("CometWebGLMesh"))(a,c("createWebGLColoredMeshProgram")(a),{interleaved:!1});this.$2.addAttribute("a_position",{offset:0});a=b/2;b=d/2;d=[a,-b,-e,a,b,-e,-a,b,-e,-a,-b,-e];this.$2.bufferData(d);this.$2.bufferIndex([0,1,2,2,3,0]);this.$2.setUniform("u_color",[0,0,0,1])}var b=a.prototype;b.draw=function(a,b){var c=this.$1;c.depthMask(!1);c.stencilMask(255);c.clear(c.STENCIL_BUFFER_BIT);c.stencilFunc(c.ALWAYS,1,255);c.stencilOp(c.KEEP,c.KEEP,c.REPLACE);this.$2.setUniform("viewMatrix",a);this.$2.setUniform("projectionMatrix",b);this.$2.program.use();this.$2.draw();c.depthMask(!0);c.stencilFunc(c.EQUAL,1,255);c.stencilMask(0)};return a}();g["default"]=a}),98);
__d("beginXRSession",["promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,d=a.draw,e=a.gl,f=a.onEnter,g=a.onExit;b=(b=a.sessionType)!=null?b:"inline";var h=(a=a.refSpaceType)!=null?a:"local",i=null,j=null;c("promiseDone")(navigator.xr.requestSession(b).then(function(a){i=a;f!=null&&f();function b(){i=null,g!=null&&g()}a.addEventListener("end",b);function c(){i!=null&&i.end(),b()}a.addEventListener("select",c);a.addEventListener("squeeze",c);a.updateRenderState({baseLayer:new window.XRWebGLLayer(a,e,{stencil:!0})});return a.requestReferenceSpace(h)}).then(function(a){i!=null&&(j=a,i.requestAnimationFrame(k))}));function k(a,b){if(i==null||j==null)return;a=b.session;a.requestAnimationFrame(k);b=b.getViewerPose(j);if(b==null)return;a=a.renderState.baseLayer;e.bindFramebuffer(e.FRAMEBUFFER,a.framebuffer);d(b,a)}return function(){i!=null&&i.end()}}g["default"]=a}),98);
__d("XR3DPhotoViewer.react",["CometWebGLRoundedRectangleMesh","Matrices","ViewInVRButton.react","XRImmersiveMediaStoryCard","XRImmersiveMediaWindow","beginXRSession","formatDate","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=1.3,k=1,l=.03,m=.03,n=[0,0,-1.25],o=.2,p=512,q=1.5,r=.666489;function s(a,b,d){var e,f=b[0]<b[1],g=f?k:j,h=f?j:k,i=g+l*2,s=h+l*2+o,t=(f?s/i:1)*p,u=(f?1:i/s)*p,v=new(c("CometWebGLRoundedRectangleMesh"))(a,i,s,m);i=(i=d==null?void 0:d.time)!=null?i:null;i=i==null?"":c("formatDate")(i,"F j, Y");var w=new(c("XRImmersiveMediaStoryCard"))({description:(e=d==null?void 0:d.description)!=null?e:"",height:t,photoURL:(e=d==null?void 0:d.actorPhoto)!=null?e:"",reload:function(){v.setTextureSource(w.getCanvas())},subtitle:i,title:(t=d==null?void 0:d.actorName)!=null?t:"",width:u});e=(s-h)/2-l;v.setTransform([1,0,0,0,0,1,0,0,0,0,1,0,n[0],n[1]+e,n[2],1]);v.setTextureSource(w.getCanvas());i=new(c("XRImmersiveMediaWindow"))(a,g,h,-n[2]);d=f?b[1]:b[0];t=q;if(d!=null&&d!==r){u=-n[2]/2*Math.tan(r/2);s=-n[2]/2*Math.tan(d/2);t=q*u/s}e=c("Matrices").createScalingMatrix(t,t,1);return[i,v,e]}function a(a){var b=a.fov,d=a.gl,e=a.meshes,f=a.storyContext;if(d==null||b==null||e==null)return null;a=function(){var a=s(d,b,f),g=a[0],h=a[1];a=a[2];for(var i=e,j=Array.isArray(i),k=0,i=j?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(j){if(k>=i.length)break;l=i[k++]}else{k=i.next();if(k.done)break;l=k.value}l=l;l.setUniform("transformMatrix",a)}function m(a,b){d.enable(d.STENCIL_TEST);d.enable(d.DEPTH_TEST);d.enable(d.BLEND);d.blendFunc(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA);d.clearColor(.33,.33,.33,1);d.clear(d.COLOR_BUFFER_BIT);for(var a=a.views,c=Array.isArray(a),f=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(c){if(f>=a.length)break;i=a[f++]}else{f=a.next();if(f.done)break;i=f.value}i=i;var j=b.getViewport(i);d.viewport(j.x,j.y,j.width,j.height);j=i.transform.inverse.matrix;i=i.projectionMatrix;g.draw(j,i);d.clear(d.DEPTH_BUFFER_BIT);for(var k=e,l=Array.isArray(k),m=0,k=l?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n;if(l){if(m>=k.length)break;n=k[m++]}else{m=k.next();if(m.done)break;n=m.value}n=n;n.setUniform("projectionMatrix",i);n.setUniform("viewMatrix",j);n.program.use();n.draw()}d.stencilFunc(d.NOTEQUAL,1,255);h.draw(j,i)}d.disable(d.STENCIL_TEST)}c("beginXRSession")({draw:m,gl:d,sessionType:"immersive-vr"})};return i.jsx(c("ViewInVRButton.react"),{onPress:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("XRViewerGating.react",["Promise","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;var k=e.useEffect,l=e.useState,m="xr"in((d=window.navigator)!=null?d:{})?null:!1,n=null;function a(a){a=a.children;var d=l(m),e=d[0],f=d[1];k(function(){if(m===!1)return;var a=!0;n===null&&(n=window.navigator.xr.isSessionSupported("immersive-vr").then(function(a){m=a;return(h||(h=b("Promise"))).resolve(a)}));c("promiseDone")(n.then(function(b){a&&f(b)}));return function(){a=!1}},[f]);return e===!0?a:j.jsx("div",{})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("XR3DPhotoViewerEntry.react",["XR3DPhotoViewer.react","XRViewerGating.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsx(c("XRViewerGating.react"),{children:i.jsx(c("XR3DPhotoViewer.react"),babelHelpers["extends"]({},a))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("createWebGL3DPhotoProgram",["CometWebGLProgram","Matrices"],(function(a,b,c,d,e,f,g){"use strict";var h="\nattribute vec3 a_position;\nattribute vec2 a_texcoord_0;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 transformMatrix;\nvarying vec2 v_texcoord_0;\n\nvoid main() {\n  v_texcoord_0 = a_texcoord_0;\n  gl_Position = projectionMatrix * viewMatrix * transformMatrix * vec4(a_position, 1.0);\n}\n",i='\nprecision mediump float;\n\nvarying vec2 v_texcoord_0;\nuniform sampler2D u_texture_0;\n\nvoid main() {\n  // LOD refers to "level of detail" and is used for mipmap filtering.\n  // A positive LOD bias samples closer to the less detailed mipmap level,\n  // and a negative LOD bias samples closer to the more detailed mipmap level.\n  const float kLodBias = 0.0;\n  gl_FragColor = texture2D(u_texture_0, v_texcoord_0, kLodBias);\n}\n';function a(a){var b=new(c("CometWebGLProgram"))(a);return b.addShader(h,a.VERTEX_SHADER).addShader(i,a.FRAGMENT_SHADER).compile().setUniformDefaults({projectionMatrix:c("Matrices").createIdentityMat4(),transformMatrix:c("Matrices").createIdentityMat4(),viewMatrix:c("Matrices").createIdentityMat4()})}g["default"]=a}),98);
__d("createMeshesFromGLTF",["CometWebGLMesh","CometWebGLTexture","Promise","createWebGL3DPhotoProgram"],(function(a,b,c,d,e,f,g){"use strict";var h,i={POSITION:"a_position",TEXCOORD_0:"a_texcoord_0"};function a(a,d){var e=[],f=c("createWebGL3DPhotoProgram")(a),g=[],k=d.getMeshes();for(var k=k,l=Array.isArray(k),m=0,k=l?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n;if(l){if(m>=k.length)break;n=k[m++]}else{m=k.next();if(m.done)break;n=m.value}n=n;n=n.primitives;for(var n=n,o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}q=q;var r=q.attributes,s=[],t=Infinity,u=0;r=Object.entries(r);for(var v=0;v<r.length;v++){var w=r[v],x=w[0];w=w[1];if(typeof w==="number"){w=d.getAccessor(w);var y=d.getBufferView(w.bufferView);y.byteOffset<t&&(t=y.byteOffset);y.byteOffset+y.byteLength>u&&(u=y.byteOffset+y.byteLength);w=w.byteOffset!=null?w.byteOffset:0;s.push({byteOffset:y.byteOffset+w,name:x})}}s.sort(j);var z=new(c("CometWebGLMesh"))(a,f,{interleaved:!1});y=d.getBinarySource();for(w=0;w<s.length;w++){x=s[w];if(x.name in i){r=x.byteOffset-t;v={offset:r};z.addAttribute(i[x.name],v)}}z.bufferData(new Float32Array(y.buffer,y.byteOffset+t,(u-t)/4));q.indices!=null&&z.bufferIndex(d.getDataViewForAccessor(q.indices));if(q.material!=null){r=d.getMaterial(q.material);var A=r==null?void 0:(x=r.pbrMetallicRoughness)==null?void 0:(v=x.baseColorTexture)==null?void 0:v.index;A!=null&&(function(){var e=d.getTexture(A),f=d.getImage(e.source),i=new(c("CometWebGLTexture"))(a,{generateMipmaps:!0});g.push(new(h||(h=b("Promise")))(function(a,b){f.onload=function(){i.setSource(f),a()},f.onerror=function(){b()}}));z.setUniform("u_texture_0",i)})()}e.push(z)}}return(h||(h=b("Promise"))).all(g).then(function(){return e})}function j(a,b){return a.byteOffset-b.byteOffset}g["default"]=a}),98);
__d("glVec3CrossProduct",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}f["default"]=a}),66);
__d("glMatrixLookingAtTarget",["glVec3CrossProduct"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b=[a[0]-b[0],a[1]-b[1],a[2]-b[2]];var d=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=d;b[1]/=d;b[2]/=d;d=c("glVec3CrossProduct")([0,1,0],b);var e=c("glVec3CrossProduct")(b,d);return[d[0],d[1],d[2],0,e[0],e[1],e[2],0,b[0],b[1],b[2],0,a[0],a[1],a[2],1]}g["default"]=a}),98);
__d("useFrameTiming",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useEffect,k=b.useRef;function a(){var a=k(null),b=k(null),c=i(function(a){var c=b.current;if(c==null)return;c(a)},[]),d=i(function(d){var e=a.current;e!=null&&window.cancelAnimationFrame(e);b.current=d;a.current=window.requestAnimationFrame(c)},[c]),e=i(function(){var b=a.current;if(b==null)return;window.cancelAnimationFrame(b)},[]);j(function(){return function(){var b=a.current;if(b==null)return;window.cancelAnimationFrame(b)}},[]);return[d,e]}g["default"]=a}),98);
__d("GLTFResource",["unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=[],this.$2=[],this.$3=null,this.$4=null,this.$5=[],this.$6=[],this.$7=[],this.$8=[]}var b=a.prototype;b.addBinarySource=function(a,b,c){this.$3=new Uint8Array(a,b,c)};b.useJSON=function(a){var b;this.$4=(b=a.extras)!=null?b:Object.freeze({});this.$1=(b=a.accessors)!=null?b:[];this.$2=(b=a.bufferViews)!=null?b:[];this.$5=(b=a.images)!=null?b:[];this.$6=(b=a.materials)!=null?b:[];this.$7=(b=a.meshes)!=null?b:[];this.$8=(b=a.textures)!=null?b:[]};b.getBinarySource=function(){if(this.$3==null)throw c("unrecoverableViolation")("attempted to access binary source before it was set","webgl");return this.$3};b.hasBinarySource=function(){return this.$3!=null};b.getAccessor=function(a){a=this.$1[a];if(a==null)throw c("unrecoverableViolation")("accessor index out of range","webgl");return a};b.getBufferView=function(a){a=this.$2[a];if(a==null)throw c("unrecoverableViolation")("buffer view index out of range","webgl");return a};b.getExtras=function(){return this.$4};b.getMaterial=function(a){a=this.$6[a];if(a==null)throw c("unrecoverableViolation")("material index out of range","webgl");return a};b.getMeshes=function(){return this.$7};b.getTexture=function(a){a=this.$8[a];if(a==null)throw c("unrecoverableViolation")("texture index out of range","webgl");return a};b.getDataViewForAccessor=function(a){a=this.$1[a];if(a==null)throw c("unrecoverableViolation")("accessor index out of range","webgl");var b=this.$2[a.bufferView];if(b==null)throw c("unrecoverableViolation")("buffer view index out of range","webgl");if(b.buffer!==0)throw c("unrecoverableViolation")("external gltf buffers are not currently supported","webgl");var d=this.$3;if(d==null)throw c("unrecoverableViolation")("attempted to get an accessor before loading binary data","webgl");var e=d.byteOffset+b.byteOffset;switch(a.componentType){case 5120:return new Int8Array(d.buffer,e,b.byteLength);case 5121:return new Uint8Array(d.buffer,e,b.byteLength);case 5122:return new Int16Array(d.buffer,e,b.byteLength/2);case 5123:return new Uint16Array(d.buffer,e,b.byteLength/2);case 5124:return new Int32Array(d.buffer,e,b.byteLength/4);case 5125:return new Uint32Array(d.buffer,e,b.byteLength/4);case 5126:return new Float32Array(d.buffer,e,b.byteLength/4);default:throw c("unrecoverableViolation")("unsupported gl component type","webgl")}};b.getImage=function(a){a=this.$5[a];var b=this.getBufferView(a.bufferView),c=this.getBinarySource();c=new Uint8Array(c.buffer,c.byteOffset+b.byteOffset,b.byteLength);b=new Blob([c],{type:a.mimeType});c=URL.createObjectURL(b);a=new Image();a.src=c;return a};return a}();g["default"]=a}),98);
__d("GLTFTypesValidator",["unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){throw c("unrecoverableViolation")("unrecoverable incorrectly formatted JSON ".concat(a),"webgl")}function i(a){a===void 0&&h("GLTFAccessor undefined"),s(a.bufferView,!0,"GLTFAccessor.bufferView",0),s(a.byteOffset,!1,"GLTFAccessor.byteOffset",0),s(a.componentType,!0,"GLTFAccessor.componentType",5120,5126),s(a.count,!0,"GLTFAccessor.count",1),a.type!==void 0&&(a.type!=="SCALAR"&&a.type!=="VEC2"&&a.type!=="VEC3"&&a.type!=="VEC4"&&h("GLTFAccessor malformed"))}function j(a){k(a,!0,"GLTFAccessor");if(a!==void 0)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;i(d)}}function k(a,b,c){if(a===void 0)if(b)h("Array<".concat(c).concat("> undefined"));else return;else a.length===0&&h("Array<".concat(c).concat("> length=0"))}function a(a,b,c){if(a===void 0)if(b)h(c.concat(" undefined"));else return;typeof a!=="boolean"&&h(c.concat(" not a boolean"))}function l(a){a===void 0&&h("GLTFBuffer undefined"),s(a.byteLength,!0,"GLTFBuffer.byteLength",1)}function m(a){s(a.buffer,!0,"GLTFBufferView.buffer",0),s(a.byteOffset,!0,"GLTFBufferView.byteOffset",0),s(a.byteLength,!0,"GLTFBufferView.byteLength",0)}function n(a){k(a,!1,"GLTFBufferView");if(a!==void 0)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;m(d)}}function o(a){k(a,!1,"GLTFBuffer");if(a!==void 0)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;l(d)}}function p(a){a!==void 0&&(a.FB_PHOTO_3D_DATA!==void 0?(a.FB_PHOTO_3D_DATA.hFov!==void 0&&s(a.FB_PHOTO_3D_DATA.hFov,!1,"GLTFExtras.FB_PHOTO_3D_DATA.hFov"),a.FB_PHOTO_3D_DATA.vFov!==void 0&&s(a.FB_PHOTO_3D_DATA.vFov,!1,"GLTFExtras.FB_PHOTO_3D_DATA.vFov")):h("GLTFExtras undefined"))}function b(a){a!==void 0?(j(a.accessors),o(a.buffers),n(a.bufferViews),p(a.extras),r(a.images),u(a.materials),w(a.meshes),B(a.textures)):h("GLTFBody undefined")}function q(a){a===void 0&&h("GLTFImage undefined"),z(a.mimeType,!0,"GLTFImage.mimeType"),s(a.bufferView,!0,"GLTFImage.bufferView",0)}function r(a){k(a,!1,"GLTFImage");if(a!==void 0)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;q(d)}}function s(a,b,c,d,e){d===void 0&&(d=Number.MIN_SAFE_INTEGER);e===void 0&&(e=Number.MAX_SAFE_INTEGER);if(a===void 0)if(b)h(c.concat(" undefined"));else return;typeof a==="number"?(a<d||a>e)&&h(c.concat(" out of range")):h(c.concat(" not an integer"))}function t(a){a===void 0&&h("GLTFMaterial undefined"),a.pbrMetallicRoughness!==void 0&&(a.pbrMetallicRoughness.baseColorTexture!==void 0&&s(a.pbrMetallicRoughness.baseColorTexture.index,!1,"GLTFMaterial.pbrMetallicRoughness.baseColorTexture.index",0))}function u(a){k(a,!1,"GLTFMaterial");if(a!==void 0)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;t(d)}}function v(a){a===void 0&&h("GLTFMesh undefined"),y(a.primitives)}function w(a){k(a,!0,"GLTFMesh");if(a!==void 0)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;v(d)}}function x(a){a===void 0&&h("GLTFPrimitive undefined");for(var b in a.attributes)Object.prototype.hasOwnProperty.call(a.attributes,b)&&(b==="POSITION"||b==="TEXCOORD_0"||b==="TEXCOORD_1"?s(a.attributes[b],!0,"GLTFPrimitives.attributes[".concat(b).concat("]"),0):h("GLTFPrimitive malformed"));s(a.indices,!1,"GLTFPrimitives.indicies",0);s(a.material,!1,"GLTFPrimitives.material",0)}function y(a){a===void 0&&h("GLTFPrimatives undefined");k(a,!0,"GLTFPrimitive");for(var b=0;b<a.length;b++){var c=a[b];x(c)}}function z(a,b,c){if(a===void 0)if(b)h(c.concat(" undefined"));else return;typeof a!=="string"&&h(c.concat(" not a string"))}function A(a){a===void 0&&h("GLTFTexture undefined"),s(a.sampler,!0,"GLTFTexture.sampler",0),s(a.source,!0,"GLTFTexture.source",0)}function B(a){k(a,!0,"GLTFTexture");if(a!==void 0)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;A(d)}}g.throwBadFormat=h;g.validateAccessor=i;g.validateAccessors=j;g.validateArray=k;g.validateBoolean=a;g.validateBuffer=l;g.validateBufferView=m;g.validateBufferViews=n;g.validateBuffers=o;g.validateExtras=p;g.validateGLTFBodyJSON=b;g.validateImage=q;g.validateImages=r;g.validateInteger=s;g.validateMaterial=t;g.validateMaterials=u;g.validateMesh=v;g.validateMeshes=w;g.validatePrimitive=x;g.validatePrimitives=y;g.validateString=z;g.validateTexture=A;g.validateTextures=B}),98);
__d("extractUTF8StringFromBuffer",["EndianAwareDataReader","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a>127}function i(a){return a>=192&&a<=223}function j(a){return a>=224&&a<=239}function k(a){return a>=240&&a<=247}function a(a,b,d){if(b+d>a.byteLength)throw c("unrecoverableViolation")("offset and length exceed ArrayBuffer bounds","webgl");if("TextDecoder"in window){var e=new TextDecoder("utf-8"),f=new Uint8Array(a,b,d);return e.decode(f)}e=new(c("EndianAwareDataReader"))(a.slice(b,b+d),!1);f=[];while(e.canReadU8()){a=e.readU8();if(h(a))if(i(a)){if(!e.canReadU8())throw c("unrecoverableViolation")("incomplete two-byte utf8 sequence","webgl");b=e.readU8();a=(a&31)<<6|b&63}else if(j(a)){d=e.canReadU8()?e.readU8():null;b=e.canReadU8()?e.readU8():null;if(d==null||b==null)throw c("unrecoverableViolation")("incomplete three-byte utf8 sequence","webgl");a=(a&15)<<12|(d&63)<<6|b&63}else if(k(a)){d=e.canReadU8()?e.readU8():null;b=e.canReadU8()?e.readU8():null;var g=e.canReadU8()?e.readU8():null;if(d==null||b==null||g==null)throw c("unrecoverableViolation")("incomplete four-byte utf8 sequence","webgl");a=(a&7)<<18|(d&63)<<12|(b&63)<<6|g&63}else throw c("unrecoverableViolation")("unknown utf8 start sequence","webgl");if(a<=65535)f.push(String.fromCharCode(a));else if(a<=1114111)a-=65536,f.push(String.fromCharCode(a>>10|55296)),f.push(String.fromCharCode(a&1023|56320));else throw c("unrecoverableViolation")("codepoint is beyond ","webgl")}return f.join("")}g["default"]=a}),98);
__d("parseGLBResource",["GLTFResource","GLTFTypesValidator","extractUTF8StringFromBuffer","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=1179937895;function a(a){var b=new DataView(a);if(b.getUint32(0,!0)!==h)throw c("unrecoverableViolation")("invalid GLB magic number","webgl");if(b.getUint32(4,!0)!==2)throw c("unrecoverableViolation")("unsupported GLB version number","webgl");var e=b.getUint32(8,!0);if(e>a.byteLength)throw c("unrecoverableViolation")("glb buffer is shorter than declared byte length","webgl");var f=new(c("GLTFResource"))(),g=12;while(g<e){var i=b.getUint32(g,!0),j=b.getUint32(g+4,!0);switch(j){case 1313821514:j=c("extractUTF8StringFromBuffer")(a,g+8,i);var k="";try{k=JSON.parse(j)}catch(a){throw c("unrecoverableViolation")("failed to parse glTF JSON","webgl",a)}d("GLTFTypesValidator").validateGLTFBodyJSON(k);f.useJSON(k);break;case 5130562:f.addBinarySource(a,g+8,i);break;default:throw c("unrecoverableViolation")("unexpected GLB section label","webgl")}g+=i+8}return f}g["default"]=a}),98);
__d("useGLBLoadAndParse",["parseGLBResource","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useState;function a(a){var b=j(null),d=b[0],e=b[1];i(function(){var b=!1;c("promiseDone")(window.fetch(a).then(function(a){return a.arrayBuffer()}).then(function(a){if(b)return;a=c("parseGLBResource")(a);e(a)})["catch"](function(){e(null)}));return function(){b=!0}},[a]);return d}g["default"]=a}),98);
__d("useGLContext",["WebPixelRatio","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useEffect,k=b.useState;function a(a,b,e){var f=k(null),g=f[0],h=f[1],l=(f=e==null?void 0:e.expand)!=null?f:!1,m=(f=e==null?void 0:e.stencil)!=null?f:!1;j(function(){var a=document.createElement("canvas"),b=a.getContext("webgl",{stencil:m});if(b==null){c("recoverableViolation")("Unable to create WebGL context","webgl");return function(){}}h(b);return function(){try{b.getExtension("WEBGL_lose_context").loseContext()}catch(a){c("recoverableViolation")("Failed to clean up WebGL context","webgl",{error:a})}}},[]);j(function(){if(g==null)return;var c=g.canvas,e=d("WebPixelRatio").get(),f=a*e;e=b*e;c.width=f;c.height=e;g.viewport(0,0,f,e);c.style.width=l?"100%":a+"px"},[g,a,b,l]);e=i(function(a){if(g==null)return;var b=g.canvas,c=b.parentNode;c!=null&&c.removeChild(b);a!=null&&a.appendChild(b)},[g]);return[g,e]}g["default"]=a}),98);
__d("useGLTFDerivedFOV",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo,j=1,k=.508015513,l=.666488587,m=.925,n=Object.freeze({landscape:-.14,portrait:-.124}),o=Object.freeze({landscape:-.124,portrait:-.112}),p=Object.freeze({landscape:.96,portrait:.8}),q=Object.freeze({landscape:.6,portrait:.7});function a(a){var b=i(function(){var b;b=(b=a==null?void 0:(b=a.getExtras())==null?void 0:(b=b.FB_PHOTO_3D_DATA)==null?void 0:b.vFov)!=null?b:l;return b*m},[a]),c=i(function(){var b;b=(b=a==null?void 0:(b=a.getExtras())==null?void 0:(b=b.FB_PHOTO_3D_DATA)==null?void 0:b.hFov)!=null?b:k;return b*m},[a]),d=i(function(){var a=.1,d=1e3,e=1/Math.tan(b/2),f=c/b;return[e/f,0,0,0,0,e,0,0,0,0,(a+d)/(a-d),-1,0,0,a*d*2/(a-d),0]},[c,b]),e=i(function(){var a=c>b?"landscape":"portrait",d=n[a],e=o[a];return[Math.tan(c/2)*j*d,Math.tan(b/2)*j*e,1-p[a],q[a]]},[c,b]),f=e[0],g=e[1],h=e[2];e=e[3];return{hFov:c,maxHorizontalAngle:f,maxVerticalAngle:g,projectionMatrix:d,targetInteractionWeightHorizontal:h,targetScrollWeightVertical:e,vFov:b}}g["default"]=a}),98);
__d("Comet3DPhotoViewer.react",["fbt","CometFeedStoryImmersiveMediaMouseOverlay.react","CometLazyPopoverTrigger.react","ConstUriUtils","JSResourceForInteraction","Matrices","UserAgent","XR3DPhotoViewerEntry.react","clearTimeout","createMeshesFromGLTF","getCometPrefersReducedMotion","gkx","glMatrixLookingAtTarget","mergeRefs","promiseDone","react","setTimeout","useFrameTiming","useGLBLoadAndParse","useGLContext","useGLTFDerivedFOV","useResizeObserver","useThrottled","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useEffect,aa=b.useMemo,m=b.useRef,n=b.useState,ba=c("JSResourceForInteraction")("CometFeedStory3DPhotoContextMenu.react").__setRef("Comet3DPhotoViewer.react"),o=1,p=.01,ca=.005,da=.1,q=.06,ea=.12,r=c("getCometPrefersReducedMotion")()?.25:1;function a(a){var b=a.aspectRatio,e=a.fallbackURI,f=a.fileURI,g=a.onLoad,i=a.photoID;a=a.storyContext;var s=c("gkx")("20861"),t=n(!1),u=t[0],v=t[1],w=m(null),x=j.createRef();t=n(1024);var y=t[0],z=t[1];t=c("useGLContext")(y,Math.ceil(y/b),{expand:!0,stencil:!0});var A=t[0],B=t[1];y=c("useFrameTiming")();var C=y[0],D=c("useGLBLoadAndParse")(f);b=n([]);var E=b[0],fa=b[1];l(function(){if(A==null||D==null)return;var a=!1;c("promiseDone")(c("createMeshesFromGLTF")(A,D).then(function(b){if(a)return;fa(b);g&&g();C(V)}));return function(){a=!0}},[A,D,g]);t=c("useGLTFDerivedFOV")(D);var F=t.hFov,G=t.maxHorizontalAngle,H=t.maxVerticalAngle,I=t.projectionMatrix,J=t.targetInteractionWeightHorizontal,K=t.targetScrollWeightVertical,L=t.vFov,M=k(function(){if(A==null||E.length===0)return;A.enable(A.DEPTH_TEST);A.clear(A.COLOR_BUFFER_BIT|A.DEPTH_BUFFER_BIT);A.enable(A.BLEND);A.blendFunc(A.SRC_ALPHA,A.ONE_MINUS_SRC_ALPHA);for(var a=E,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.program.use();d.draw()}},[E,A]),ga=function(){c("clearTimeout")(w.current),w.current=c("setTimeout")(function(){v(!0)},3e3)};y=function(){u&&v(!1),ga()};var N=c("useThrottled")(y,100),O=c("useVisibilityObserver")({onVisible:function(){c("clearTimeout")(w.current),w.current=c("setTimeout")(function(){v(!0)},3e3)}});l(function(){return function(){c("clearTimeout")(w.current)}},[]);var P=m([0,0]),Q=m(1),R=m(1),S=m([0,0]),T=m([0,0]),U=m(0),V=k(function(a){if(A==null)return;if(a!=null){if(U.current!==0){var b=Math.min(a-U.current,50);b=Math.max(Math.min(ca*b,1),0);var d=S.current,e=d[0];d=d[1];var f=T.current,g=f[0];f=f[1];T.current=[g+b*(e-g),f+b*(d-f)];g=Q.current;f=R.current;R.current=f+b*(g-f);(Math.abs(T.current[0]-e)>p||Math.abs(T.current[1]-d)>p||Math.abs(R.current-g)>p)&&C(V)}U.current=a}b=R.current;f=L*ea*(2*b-1)*r;e=(1-2*b)*H;d=T.current;g=d[0];a=d[1];d=Math.sin(g*Math.PI*.5*r);g=Math.sin(a*Math.PI*.5*r);a=L*q*g;var h=F*q*d;d=-d*G;g=-g*H;b=Math.pow(b+.16,3)/(Math.pow(b+.16,3)+Math.pow(1-(b+.16),3))-.9;a=-(a+f);f=-h;h=o-b*da*r;b=[0+h*Math.cos(a)*Math.sin(f),0+h*Math.sin(a),-o+h*Math.cos(a)*Math.cos(f)];h=[-(J*d),-(e*K+g*(1-K)),-o];a=c("glMatrixLookingAtTarget")(b,h);f=c("Matrices").invertMat4(a);for(d=E,e=Array.isArray(d),g=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(g>=d.length)break;b=d[g++]}else{g=d.next();if(g.done)break;b=g.value}h=b;h.setUniform("viewMatrix",f);h.setUniform("projectionMatrix",I)}M()},[M,A,F,G,H,E,I,C,J,K,L]);l(function(){var a=x==null?void 0:x.current;if(a==null)return;a=a.clientWidth;a!=null&&z(a)},[x]);var W=c("useResizeObserver")(function(a){z(Math.floor(a.width))}),X=k(function(){if(A==null)return;var a=A.canvas,b=0,c=0;while(a!=null)b+=a instanceof HTMLElement?a.offsetLeft:0,c+=a instanceof HTMLElement?a.offsetTop:0,a=a instanceof HTMLElement?a.offsetParent:null;P.current=[b,c]},[P,A]),Y=k(function(){var a;if(A==null)return;X();var b=window.innerHeight,c=A.canvas.clientHeight;b=b+c;a=P.current[1]-((a=(a=document.scrollingElement)==null?void 0:a.scrollTop)!=null?a:0)+c;c=a/b;Q.current=c;if(c<0||c>1)return;C(V)},[P,A,C,V,X]);b=k(function(a){if(A==null)return;X();var b=a.pageX;a=a.pageY;b=b-P.current[0];a=a-P.current[1];b=2*b/A.canvas.clientWidth-1;a=1-2*a/A.canvas.clientHeight;S.current=[b,a];N();if(b<-1||a<-1||b>1||a>1)return;C(V)},[A,S,C,N,V,X]);l(function(){document.addEventListener("scroll",Y);V();return function(){document.removeEventListener("scroll",Y)}},[V,Y]);var Z,$;if(i!=null){Z=(t=d("ConstUriUtils").getUri("/intern/compphoto/x3d/3dphoto_console"))==null?void 0:(y=t.setDomain("our.intern.facebook.com"))==null?void 0:(t=y.setProtocol("https"))==null?void 0:(y=t.addQueryParam("ent_id",i))==null?void 0:y.toString();$=(t=d("ConstUriUtils").getUri("/intern/compphoto/x3d/"+i+"/depth"))==null?void 0:(y=t.setDomain("our.intern.facebook.com"))==null?void 0:(i=y.setProtocol("https"))==null?void 0:i.toString()}t=n(0);y=t[0];var ha=t[1];i=n(0);t=i[0];var ia=i[1],ja=function(a,b){var d=/^a$/i.test(a.target.nodeName||""),e=c("UserAgent").isPlatform("Mac OS X")?a.metaKey:a.ctrlKey;d=!d&&s&&e;d&&(ha(a.nativeEvent.offsetX),ia(a.nativeEvent.offsetY),a.preventDefault(),b())};i=aa(function(){return c("mergeRefs")(B,O,x,W)},[B,O,x,W]);a=c("XR3DPhotoViewerEntry.react")!=null?j.jsx(c("XR3DPhotoViewerEntry.react"),{fov:[F,L],gl:A,meshes:E,storyContext:a}):null;var ka=j.jsxs("div",{onMouseMove:b,ref:i,children:[j.jsx(c("CometFeedStoryImmersiveMediaMouseOverlay.react"),{descriptionFbt:h._("Move your mouse to view the photo in 3D"),isActive:u,showClick:!1}),a]});b=j.jsx(c("CometLazyPopoverTrigger.react"),{popoverProps:{consoleURL:Z,depthURL:$,fallbackImgURL:e,fileURL:f,mouseClickX:y,mouseClickY:t},popoverResource:ba,children:function(a,b){return j.jsx("div",{className:"x1ey2m1c xds687c x10l6tqk x17qophe x13vifvy",onContextMenu:function(a){ja(a,b)},ref:a,children:ka})}});return s?b:ka}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometRemote3DPhotoViewer.react",["Comet3DPhotoLoadingOverlay.react","Comet3DPhotoViewer.react","CometFeedStoryViewportMaxHeightMediaLayout.react","CometRelay","CometRemote3DPhotoViewer_photo.graphql","DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE","clearTimeout","react","recoverableViolation","setTimeout","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));e=j;var l=e.useCallback,m=e.useEffect,n=e.useRef,o=e.useState,p={content:{height:"x5yr21d",position:"x1n2onr6",$$css:!0},image:{bottom:"x1ey2m1c",end:"xds687c",left:null,right:null,position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",$$css:!0},overlays:{bottom:"x1ey2m1c",end:"xds687c",left:null,right:null,pointerEvents:"x47corl",position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",$$css:!0},photoContainer:{position:"x1n2onr6",$$css:!0},root:{borderBottom:"xua58t2",borderTop:"xzg4506",boxShadow:"x2qxk11",$$css:!0}};function a(a){var e,f,g=a.fallback,j=a.storyContext,q=d("CometRelay").useFragment(h!==void 0?h:h=b("CometRemote3DPhotoViewer_photo.graphql"),a.photo),r=o(!1),s=r[0],t=r[1];r=o(!1);var u=r[0],v=r[1],w=n(null);m(function(){w.current=c("setTimeout")(function(){v(!0)},2e3);return function(){w.current!=null&&c("clearTimeout")(w.current)}},[]);r=l(function(){t(!0)},[t]);u=!u||!s;q=(s=q==null?void 0:q.immersive_photo_encodings)!=null?s:[];s=q.find(function(a){return(a==null?void 0:a.projection_type)==="three_d"});if(a.glbFileURI==null&&s==null){c("recoverableViolation")("3D photo does not have three_d encoding","comet_feed");return g}a=a.glbFileURI!=null?a.glbFileURI:(q=s==null?void 0:s.binary_cdn_uri)!=null?q:"";s=(q=s==null?void 0:s.id)!=null?q:"";q=(q=c("DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE")(g).props.src)!=null?q:"";e=(e=c("DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE")(g).props.width)!=null?e:0;f=(f=c("DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE")(g).props.height)!=null?f:0;(e===0||f===0)&&c("recoverableViolation")("null fallback size was provided for 3d photo","comet_feed");var x=e===0||f===0?{aspectRatio:1,height:1,width:1}:{aspectRatio:e/f,height:f,width:e};x=x.aspectRatio;var y=a!=null&&c("Comet3DPhotoViewer.react")!=null?k.jsxs("div",{className:"x1n2onr6",children:[k.jsx(c("Comet3DPhotoViewer.react"),{aspectRatio:x,fallbackURI:q,fileURI:a,onLoad:r,photoID:s,storyContext:j}),k.jsx("div",{className:"x1ey2m1c xds687c x47corl x10l6tqk x17qophe x13vifvy",children:k.jsx(c("Comet3DPhotoLoadingOverlay.react"),{isVisible:u})})]}):g;return k.jsx("div",{className:"xua58t2 xzg4506 x2qxk11",children:k.jsx(c("CometFeedStoryViewportMaxHeightMediaLayout.react"),{backgroundColor:null,mediaHeight:f,mediaWidth:e,children:function(a){return k.jsx("div",{className:(i||(i=c("stylex")))(p.content,a),children:k.jsx("div",{className:"x1ey2m1c xds687c x10l6tqk x17qophe x13vifvy",children:y})})}})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useWebGLContextVisibility",["HiddenSubtreePassiveContext","intersectionObserverEntryIsIntersecting","react","useIntersectionObserver"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));var i=h.useContext;function a(a,b){b===void 0&&(b=Object.freeze({}));var d=i(c("HiddenSubtreePassiveContext")),e=function(b){var e=d.getCurrentState().hiddenOrBackgrounded_FIXME;c("intersectionObserverEntryIsIntersecting")(b)?a(!0):e||a(!1)};return c("useIntersectionObserver")(e,babelHelpers["extends"]({root:null,rootMargin:{},threshold:0},b))}g["default"]=a}),98);
__d("CometFeedStory3DPhotoAttachmentStyle.react",["CometFeedStory3DPhotoAttachmentStyle_styleTypeRenderer.graphql","CometImage.react","CometPressable.react","CometRelay","CometRemote3DPhotoViewer.react","getCometMediaURL","gkx","react","unrecoverableViolation","useCometFeedStoryAttachmentMatchDebugger","useWebGLContextVisibility"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;var k=e.useMemo,l=e.useState,m={image:{bottom:"x1ey2m1c",end:"xds687c",left:null,right:null,position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",$$css:!0},mediaPressed:{backgroundColor:"xobhos8",$$css:!0},wrapper:{position:"x1n2onr6",width:"xh8yej3",$$css:!0}},n=c("gkx")("20935");function a(a){var e,f;a=a.styleTypeRenderer;a=d("CometRelay").useFragment(h!==void 0?h:h=b("CometFeedStory3DPhotoAttachmentStyle_styleTypeRenderer.graphql"),a);c("useCometFeedStoryAttachmentMatchDebugger")(a);var g=l(!1),i=g[0];g=g[1];g=c("useWebGLContextVisibility")(g,{rootMargin:{bottom:2e3,top:2e3}});a=a.attachment;var o=a==null?void 0:(e=a.description)==null?void 0:e.text;e=a==null?void 0:(e=a.target)==null?void 0:e.container_story;f=e==null?void 0:(f=e.actors)==null?void 0:f[0];var p=f==null?void 0:f.name,q=f==null?void 0:(f=f.profile_picture)==null?void 0:f.uri,r=e==null?void 0:e.creation_time,s=k(function(){if(p!=null&&q!=null&&r!=null&&o!=null)return{actorName:p,actorPhoto:q,description:o,time:r};else return null},[p,q,r,o]),t=a==null?void 0:a.media;if(t==null)throw c("unrecoverableViolation")("media attachment cannot be null in CometFeedStory3DPhotoAttachment","comet_feed");var u=(e=(f=t.photo_image)==null?void 0:f.uri)!=null?e:"",v=(a=t.accessibility_caption)!=null?a:"",w=(e=(f=t.photo_image)==null?void 0:f.height)!=null?e:0,x=(f=(a=t.photo_image)==null?void 0:a.width)!=null?f:0,y=c("getCometMediaURL")(t,null),z=k(function(){return j.jsx(c("CometImage.react"),{alt:v,height:w,src:u,width:x,xstyle:m.image})},[v,w,u,x]);e=k(function(){var a=j.jsx(c("CometRemote3DPhotoViewer.react"),{fallback:z,photo:t,storyContext:s});return j.jsx(c("CometPressable.react"),{hideHoverOverlay:!0,linkProps:{rel:n?void 0:"theater",url:y},overlayPressedStyle:m.mediaPressed,style:{display:"block"},children:a})},[z,t,y,s]);return j.jsx("div",{className:"x1n2onr6 xh8yej3",ref:g,children:i?e:z})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);